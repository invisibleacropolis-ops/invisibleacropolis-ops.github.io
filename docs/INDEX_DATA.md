# Pages Index Data

## Overview
`public/pages.json` is generated at build time by `scripts/generate-pages-json.js`. The script
walks the repository, discovers HTML files, and produces an ordered list of pages (excluding
`index.html`). Link labels in the 3D scene are populated from this data via
`src/data/pages.ts`.

## Schema
The output JSON is an array of objects with the following shape:

```json
[
  {
    "title": "string",
    "url": "string"
  }
]
```

Field details:
- `title`: Derived from the page `<title>` tag when present; otherwise generated by
  humanizing the filename (e.g. `flow-field.html` â†’ `Flow Field`).
- `url`: Root-relative URL for the HTML file (e.g. `/flow-field.html`).

The script sorts entries alphabetically by `url` before writing the file, so the order is
stable across runs.

## Generation steps

1. `scripts/generate-pages-json.js` walks the repo, skipping `.git/`, `node_modules/`, and
   `public/`.
2. Each `.html` file is evaluated against the exclude lists.
3. The script extracts a `<title>` tag (case-insensitive); if missing, it builds a
   title from the filename.
4. A `pages.json` array is written to `public/pages.json`.

## Commands

```sh
npm run build
```

or

```sh
npm run generate:pages
```

Both commands execute the same generator script.

## Excluding files

The script always skips `index.html`. You can also exclude additional HTML files by setting
`PAGES_EXCLUDE` to a comma-separated list of relative paths or basenames.

Examples:

```sh
PAGES_EXCLUDE="experimental.html,legacy/old-demo.html" npm run build
```

## Consumption in the app

`src/data/pages.ts` fetches the file at runtime and returns `PageEntry[]`. The result is
used in `src/scene/links.ts` to create label meshes and attach `linkUrl` metadata for
interaction.
